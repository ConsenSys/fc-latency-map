CREATE TABLE IF NOT EXISTS "measurements" (`id` integer,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`is_one_off` numeric,`measurement_id` integer,`start_time` integer,`stop_time` integer, `status` text, `status_stop_time` integer,PRIMARY KEY (`id`));
CREATE INDEX `idx_measurements_deleted_at` ON "measurements"(`deleted_at`);
CREATE TABLE `probes` (`id` integer,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`probe_id` integer,`country_code` text,`iata_code` text,`latitude` real,`longitude` real,PRIMARY KEY (`id`),CONSTRAINT `fk_probes_location` FOREIGN KEY (`iata_code`) REFERENCES `locations`(`iata_code`));
CREATE INDEX `idx_probes_deleted_at` ON `probes`(`deleted_at`);
CREATE UNIQUE INDEX `idx_probes_probe_id` ON `probes`(`probe_id`);
CREATE TABLE migrations (id VARCHAR(255) PRIMARY KEY);
CREATE TABLE `miners` (`id` integer,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`address` text,`ip` text,`latitude` real,`longitude` real,PRIMARY KEY (`id`));
CREATE INDEX `idx_miners_deleted_at` ON `miners`(`deleted_at`);
CREATE UNIQUE INDEX `idx_miners_address` ON `miners`(`address`);
CREATE TABLE `locations` (`id` integer,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`name` text,`country` text,`iata_code` text,`latitude` real,`longitude` real,`type` text,PRIMARY KEY (`id`));
CREATE UNIQUE INDEX `idx_locations_iata_code` ON `locations`(`iata_code`);
CREATE INDEX `idx_locations_deleted_at` ON `locations`(`deleted_at`);
CREATE UNIQUE INDEX `idx_measurement_id` ON `measurements`(`measurement_id`);
CREATE TABLE `measurement_results` (`id` integer,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`probe_id` integer,`measurement_id` integer,`measurement_timestamp` integer,`ip` text,`measurement_date` text,`time_average` real,`time_max` real,`time_min` real,PRIMARY KEY (`id`),CONSTRAINT `fk_measurement_results_probe` FOREIGN KEY (`probe_id`) REFERENCES `probes`(`probe_id`),CONSTRAINT `fk_measurement_results_measurement` FOREIGN KEY (`measurement_id`) REFERENCES `measurements`(`measurement_id`));
CREATE UNIQUE INDEX `idx_name` ON `measurement_results`(`probe_id`,`measurement_id`,`measurement_timestamp`,`ip`);
CREATE INDEX `idx_measurement_results_deleted_at` ON `measurement_results`(`deleted_at`);
